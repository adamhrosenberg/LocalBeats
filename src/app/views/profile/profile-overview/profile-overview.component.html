<div *ngIf="this.user" fxLayout="row" fxLayoutWrap="wrap">
    <div fxLayout="column" fxFlex="100" fxFlex.gt-md="50">
      <!-- Time line -->
      <mat-card *ngIf="numberCompletedReviews == 0" class="default">
        <mat-card-title>No reviews for {{user.firstName}}</mat-card-title>
        <mat-card-title></mat-card-title>
      </mat-card>
  
      <mat-card *ngIf="numberCompletedReviews > 0" class="default">
        <mat-card-title *ngIf="numberCompletedReviews > 0">Reviews for {{user.firstName}}:</mat-card-title>
        <mat-card-title *ngIf="numberCompletedReviews > 0">Average rating: {{averageRating}} out of 5 from {{numberCompletedReviews}} reviews</mat-card-title>
  
        <mat-card-content>
          <div class="timeline">

            <div class="timeline-item" *ngFor="let review of results">
  
              <div *ngIf="review.booking.bothReviewed" class="timeline-body">
                <div class="timeline-body-top" fxLayout="row">
                  <div class="timeline-body-title mr-1">
                    <mat-icon mat-list-icon>
                      <img (click)="clickedReviewer(review.fromUser)" mat-list-avatar [src]="review.fromUser.profilePicUrl" alt="No picture" style="
                      border-radius: 50%;
                      ">
                    </mat-icon>
                    {{review.fromUser.firstName}} {{review.fromUser.lastName}}
                  </div>
                </div>
  
                <div class="timeline-body-top" fxLayout="row">
                  <div class="timeline-body-title mr-1">
                    <b>{{review.title}}</b>
                  </div>
                </div>
                <div class="timeline-body-top" fxLayout="row">
                  <span class="text-muted">
                    {{ review.date | relativeTime}}
                  </span>
                </div>
                <div class="timeline-body-top" fxLayout="row">
                  <div class="timeline-body-title mr-1">
                    Rating: {{review.rating}} / 5
                  </div>
                </div>
  
                <div class="timeline-body-content">
  
                  <textarea matInput matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="10" style="
                  resize: none;">{{review.text}}</textarea>
  
                </div>
              </div>
            </div>
            <mat-paginator 
                [length]="allResults.length" 
                [pageSize]="pageSize"  
                [pageSizeOptions]="pageSizeOptions"
                (page)="pageEvent($event)">
              </mat-paginator>
          </div>
        </mat-card-content>
      </mat-card>


      <!-- End Time line -->
  
      <mat-card class="default">
        <mat-card-title>Recent Event Photos</mat-card-title>
        <mat-card-content class="p-0">
          <mat-grid-list cols="3" rowHeight="1:1" class="app-gallery">
            <!-- Gallery item -->
            <mat-grid-tile *ngFor="let photo of photos">
              <img [src]="photo.url" alt="">
              <!-- item detail, show on hover -->
              <div class="gallery-control-wrap">
                <div class="gallery-control">
                  <h4 class="photo-detail fz-1" [fxHide.lt-sm]="true">{{photo.name}}</h4>
                  <span fxFlex></span>
                  <button mat-icon-button [matMenuTriggerFor]="photoMenu" class="">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #photoMenu="matMenu">
                    <button mat-menu-item>
                      <mat-icon>send</mat-icon>Send as attachment</button>
                    <button mat-menu-item>
                      <mat-icon>favorite</mat-icon>Favorite</button>
                    <button mat-menu-item>
                      <mat-icon>delete</mat-icon>Delete</button>
                  </mat-menu>
                </div>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-card-content>
      </mat-card>
    </div>
  
    <div fxLayout="column" fxFlex="100" fxFlex.gt-md="50">  
      <mat-card class="default">
        <mat-card-title>Events Activity</mat-card-title>
        <mat-card-content class="p-0" fxLayout="column">
          <div class="activity-data">
            <ngx-datatable class="material bg-white" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="50"
              [limit]="4" [rows]="activityData">
              <ngx-datatable-column name="Month" [flexGrow]="1">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{ row?.month }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Paid" [flexGrow]="1">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{ row?.spent }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bid" [flexGrow]="1">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{ row?.opened }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Booked" [flexGrow]="1">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{ row?.closed }}
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
          </div>
        </mat-card-content>
      </mat-card>
  
    </div>
  </div>